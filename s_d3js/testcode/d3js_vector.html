<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3JS:绘制向量图</title>
        <script type="text/javascript" src="../d3/d3.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- 引入 Bootstrap -->
        <link href="../../s_bootstrap/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!-- HTML5 Shim 和 Respond.js 用于让IE8支持 HTML5 元素和媒体查询 -->
        <!-- 注意：如果通过 file:// 引入Respond.js文件，则该文件无效 -->
        <!-- [if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https//oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
            <![endif]
            -->
    </head>
    <body>
        <h1>绘制向量图</h1>
        <div class="example"></div>
        <script type="text/javascript">
            // 创建测试数据,nodes是人名，edges连线包含来源source和目标target
            // ID 3指Donovan.
            var dataset = {
                nodes: [
                    {name: "Adam"},
                    {name: "Bob"},
                    {name: "Carrie"},
                    {name: "Donovan"},
                    {name: "Edward"},
                    {name: "Felicity"},
                    {name: "George"},
                    {name: "Hannah"},
                    {name: "Iris"},
                    {name: "Jerry"}
                ],
                edges: [
                    {source: 0, target: 1},
                    {source: 0, target: 2},
                    {source: 0, target: 3},
                    {source: 0, target: 4},
                    {source: 1, target: 5},
                    {source: 2, target: 5},
                    {source: 2, target: 5},
                    {source: 3, target: 4},
                    {source: 5, target: 8},
                    {source: 5, target: 9},
                    {source: 6, target: 7},
                    {source: 7, target: 8},
                    {source: 8, target: 9}
                ]
        };
        var w = 300;
        var h = 300;
        // 创建svg
        var svg = d3.select("body div.example")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h);
        // 初始化force
        var force = d3.forceSimulation()
                      .nodes(dataset.nodes);
        var edges = svg.selectAll("line")
                       .data(dataset.edges)
                       .enter()
                       .append("line")
                       .style("stroke", "#ccc")
                       .style("stroke-width", 1);
        var nodes = svg.selectAll("circle")
                       .data(dataset.nodes)
                       .enter()
                       .append("circle")
                       .attr("r", 10)
                       .style("fill", "black")
                       .call(force.drag);
        </script>
    </body>
</html>